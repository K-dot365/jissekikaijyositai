<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>È¶ôÂ∑ùÊóÖË°å</title>
  <style>
    :root {
      --bg: #0e0f10;
      --panel: #15191e;
      --border: #2b3139;
      --text: #dfe7ef;
      --muted: #8d99a6;
      --btn: #1e242b;
      --btn-hover: #28313a;
      --accent: #4caf50;
      --accent-glow: #b3ffb8;
      --gold: #f4c542;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1000px 600px at 20% -10%, #1b2027, var(--bg));
      color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Yu Gothic", Meiryo, sans-serif;
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .app { width: min(1100px, 96vw); }
    header {
      display:flex;
      align-items: center;
      justify-content: space-between; /* „Åæ„Åü„ÅØ flex-start */
      gap: 12px;
      margin-bottom: 14px;
      flex-wrap: wrap;
    }
    h1 {
      font-size: clamp(18px, 2.3vw, 24px);
      margin: 0;
      letter-spacing: .02em;
    }
    .controls {
      display:flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }
    .control, button, select, input[type="number"] {
      background: var(--btn);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 8px 12px;
      font: inherit;
      transition: transform .02s ease, background .2s ease, border-color .2s ease;
      outline: none;
    }
    button:hover, select:hover, input[type="number"]:hover { background: var(--btn-hover); }
    button:active { transform: translateY(1px); }
    .grid {
      background: linear-gradient(180deg, #13171c, var(--panel));
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 16px;
      position: relative;
    }
    .cells { display: grid; gap: 12px; }
    .cell { position: relative; }
    .cell button {
      width: 100%;
      aspect-ratio: 1 / 1;
      border-radius: 14px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      background: #0f1419;
      border: 1px solid #212932;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
      min-width: 44px;
      min-height: 44px;
    }
    .cell button .label {
      position: absolute;
      left: 10px;
      bottom: 8px;
      right: 10px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.2;
    }
    .cell button .badge {
      position: absolute;
      top: 8px;
      right: 8px;
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      background: #1b222a;
      border:1px solid #2a313a;
      color: var(--muted);
    }
    .cell button.lit {
      border-color: rgba(76, 175, 80, .7);
      box-shadow: 0 0 0 1px rgba(76, 175, 80, .7),
                  0 4px 22px 0 rgba(76, 175, 80, .25),
                  inset 0 0 18px rgba(76, 175, 80, .25);
      background: radial-gradient(120px 120px at 30% 20%, rgba(76,175,80,.20), transparent), #0f1419;
    }
    .cell button.lit img,
    .cell button.lit .cell-text {
      filter: brightness(1.3) drop-shadow(0 0 10px rgba(76, 255, 80, 0.8));
      transition: filter 0.3s ease;
    }

    .cell button.legendary.lit {
      box-shadow: 0 0 0 1px rgba(244,197,66,.45),
                  0 6px 26px 0 rgba(244,197,66,.35),
                  inset 0 0 22px rgba(244,197,66,.3);
      background: radial-gradient(120px 120px at 30% 20%, rgba(244,197,66,.22), transparent), #0f1419;
    }

    .cell button.legendary.lit img,
    .cell button.legendary.lit .cell-text {
      filter: brightness(1.3) drop-shadow(0 0 10px rgba(255, 255, 120, 0.9));
    }

    .cell button.lit::after {
      content:"";
      position:absolute;
      inset:-4px;
      border-radius: 16px;
      pointer-events: none;
      box-shadow: 0 0 22px 8px rgba(179,255,184,.12);
    }
    
    .cell button.legendary { border-color: rgba(244,197,66,.7); }

    .footer {
      display:flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 12px;
      color: var(--muted);
      font-size: 13px;
    }
    .count { font-variant-numeric: tabular-nums; }

    /* üì± „Çπ„Éû„ÉõÁî®Ë™øÊï¥ */
    @media (max-width: 600px) {
      body { padding: 12px; }
      header { flex-direction: column; align-items: flex-start; gap: 8px; }
      .controls { width: 100%; justify-content: flex-start; }
      .cell button .label { font-size: 10px; }
      .cell button .badge { font-size: 9px; padding: 2px 6px; }
      h1 { font-size: 16px; }
    }

    .cell {
      position: relative;
      width: 100%;
      aspect-ratio: 1/1;
      overflow: hidden;
      border-radius: 8px;
    }
    .cell img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .cell-text {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.5);
      color: white;
      font-weight: bold;
      text-align: center;
      padding: 4px 0;
      font-size: 12px;
    }

    /* h1 „Å®ÈÄ≤Êçó„Éú„Çø„É≥„ÇíÊ®™‰∏¶„Å≥„Å´„Åô„Çã */
    .title-row {
      display: flex;
      align-items: center;
      gap: 12px; /* h1 „Å®„Éú„Çø„É≥„ÅÆÈñì„ÅÆ‰ΩôÁôΩ */
      flex-wrap: wrap; /* „Çπ„Éû„Éõ„ÅßÊäò„ÇäËøî„Åô„Çà„ÅÜ„Å´ */
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="title-row">
        <h1>È¶ôÂ∑ùÊóÖË°å</h1>
      </div>
      
      <div class="controls">
        <select id="preset">
          <option value="day1">Day 1</option>
          <option value="day2">Day 2</option>
        </select>
        <button id="reset">„Åô„Åπ„Å¶Ê∂àÁÅØ</button>
      </div>
    </header>

    <section class="grid">
      <div id="cells" class="cells"></div>
      <div class="footer">
        <div class="count"><span id="litCount">0</span> / <span id="totalCount">0</span> Ëß£Êîæ</div>
        <div class="hint">„Çª„É´„Çí„ÇØ„É™„ÉÉ„ÇØ„ÅßÁÇπÁÅØ/Ê∂àÁÅØ</div>
      </div>
    </section>
  </div>

  <script>
    const cellsEl = document.getElementById('cells');
    const resetBtn = document.getElementById('reset');
    const presetEl = document.getElementById('preset');
    const litCountEl = document.getElementById('litCount');
    const totalCountEl = document.getElementById('totalCount');
    // const globalProgressBtn = document.getElementById("globalProgressBtn"); // ÂâäÈô§

    const PRESETS = {
      "day1": {
        size:[3,3],
        labels:[
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex001.jpg",text:"9:30ÈõÜÂêà„Å´Èñì„Å´Âêà„ÅÜ"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex002.jpg",text:"11ÊôÇÂçä„ÅäÊòº„ÅîÈ£Ø„Åß„ÅÜ„Å©„Çì„ÇíÈ£ü„Åπ„Çã"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex003.jpg",text:"14ÊôÇ„Åî„ÇçÊ†óÊûóÂÖ¨Âúí„ÅßË®òÂøµÊíÆÂΩ±ÔºÅ"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex004.jpg",text:"16ÊôÇ„Åæ„Åß„Å´„ÉÅ„Çß„ÉÉ„ÇØ„Ç§„É≥"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex005.jpg",text:"17ÊôÇ„Ç¢„É≥„ÉÅ„ÉÉ„ÇØ„Çà„Çç„Åö„ÇÑ„Å´ÂØÑ„ÇãÔºüÔºü"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex006.jpg",text:"17ÊôÇ~18ÊôÇÂ§ßÊÄ•„ÅéÈáëÊØòÁæÖË°®ÂèÇÈÅì"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex007.jpg",text:"„Å§„ÅÑ„Åß„Å´ÈáëÊØòÁæÖÂÆÆ„ÇíÂèÇÊãù"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex008.jpg",text:"Â§ú„ÅîÈ£Ø„ÇíË¶ã„Å§„Åë„Çà„ÅÜÔºÅ"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex009.jpg",text:"20ÊôÇÂçä~ÂÆø„Åß„Åæ„Å£„Åü„Çä"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex008.jpg",text:"ÂàùÊó•„ÇíÊ•Ω„Åó„Çì„Å†„ÅûÔºÅÔºÅ"},
        ],
        legendary:[8]
      },
      "day2": {
        size:[4,3],
        labels:[
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/st001.jpg",text:"„Åä„ÅØ„Çà„ÅÜ"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex004.jpg",text:"10ÊôÇ„ÉÅ„Çß„ÉÉ„ÇØ„Ç¢„Ç¶„Éà"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/st003.jpg",text:"10ÊôÇÂçäÔΩûÂõõÂõΩÊ∞¥ÊóèÈ§®"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex001.jpg",text:"„Åï„Åô„Åå„Å´„ÅÜ„Å©„Çì‰ª•Â§ñ„ÅÆÊòº„ÅîÈ£Ø"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/st006.jpg",text:"15ÊôÇ~17ÊôÇÂ§©Á©∫„ÅÆÈ≥•Â±ÖÔºüÔºü"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/st004.jpg",text:"17ÊôÇ~18ÊôÇÂçäÂ§ïÊó•„ÅÆÁà∂ÊØç„É∂Êµú"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex001.jpg",text:"Â§ú„ÅîÈ£Ø„ÅØ„ÇÑ„Å£„Å±„Çä„ÅÜ„Å©„ÇìÔºÅ"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/st006.jpg",text:"19ÊôÇÂçä~20ÊôÇÂçäÂ§©Á©∫„ÅÆÈ≥•Â±ÖÔºüÔºü"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex001.jpg",text:"23ÊôÇ„Åî„ÇçÁùÄ ÁÑ°‰∫ã„Å´Â∏∞„Çä„Åæ„Åó„Çá„ÅÜÔºÅ"},
          {img:"ÂÆüÁ∏æËß£Èô§ÁîªÂÉè/ex008.jpg",text:"ÊóÖË°å„ÇÅ„Å°„ÇÉ„ÇÅ„Å°„ÇÉÊ•Ω„Åó„Åã„Å£„ÅüÔºÅ"},
          null,
          null,
        ],
        legendary:[9]
      },
    };
    
    let R = 4, C = 5;
    let labels = [];
    let legendary = new Set();
    let currentPreset = presetEl.value; // ‚úÖ ÂàùÊúüÂåñ„Çí„Åì„Åì„Åß

    function buildGrid(r=R, c=C, givenLabels=null) {
      R = r;
      C = c;
      cellsEl.style.gridTemplateColumns = `repeat(${C}, minmax(50px, 1fr))`;

      if (givenLabels && givenLabels.length) {
        labels = givenLabels;
      } else {
        labels = Array.from({length: r*c}, (_,i)=>`ÂÆüÁ∏æ ${i+1}`);
      }
      
      cellsEl.innerHTML = '';

      for (let i=0; i<r*c; i++) {
        const label = labels[i] || null;
        const cell = document.createElement('div');
        cell.className = 'cell';
        
        if (label === null) {
          cellsEl.appendChild(cell);
          continue;
        }

        const btn = document.createElement('button');
        btn.type = 'button';
        btn.dataset.idx = i;
        btn.setAttribute('aria-pressed', 'false');
        if (legendary.has(i)) btn.classList.add('legendary');

        let imgSrc = "images/placeholder.png";
        let textLabel = "";

        if (typeof label === "object") {
          imgSrc = label.img || imgSrc;
          textLabel = label.text || "";
        } else if (typeof label === "string") {
          if (label.match(/\.(jpg|png|gif)$/)) imgSrc = label;
          else textLabel = label;
        }

        btn.innerHTML =`
          <span class="badge">#${i+1}</span>
          <img src="${imgSrc}" alt="" loading="lazy">
          <span class="cell-text">${textLabel}</span>`;

        btn.addEventListener('click', () => toggle(btn));
        cell.appendChild(btn);
        cellsEl.appendChild(cell);
      }
    }

    function toggle(btn){
      const idx = +btn.dataset.idx;
      const specialPresets = ["day1", "day2"]; // „Éó„É™„Çª„ÉÉ„ÉàÂêç„ÇíÊõ¥Êñ∞

      const lit = btn.classList.toggle('lit');
      btn.setAttribute('aria-pressed', String(lit));
      updateCounts();
      save();//„ÇØ„É™„ÉÉ„ÇØ„Åî„Å®„Å´Ëá™Âãï‰øùÂ≠ò
    }

    function resetAll() {
      // Ë°®Á§∫‰∏≠„ÅÆ„Çª„É´„ÇíÊ∂àÁÅØ
      cellsEl.querySelectorAll('button.lit').forEach(b => {
        b.classList.remove('lit');
        b.setAttribute('aria-pressed','false');
      });

      localStorage.removeItem(getStorageKey(presetEl.value));

      updateCounts(); // „Ç´„Ç¶„É≥„Éà„ÇíÊõ¥Êñ∞„Åó„ÄÅÁâπÊÆäËß£Èô§„ÇíÂÜçË©ï‰æ°
      // checkProgressButtons(); // ÈÄ≤Êçó„Éú„Çø„É≥ÂâäÈô§„ÅÆ„Åü„ÇÅ„Ç≥„É°„É≥„Éà„Ç¢„Ç¶„Éà„Åæ„Åü„ÅØÂâäÈô§
    }

    function updateCounts(){
      // ‚úÖ day2 (Êóßstargazing-specialist) Â∞ÇÁî®Âá¶ÁêÜ
      if (presetEl.value === "day2") {
        const allButtons = Array.from(cellsEl.querySelectorAll('button[data-idx]'));
        const lastBtn = cellsEl.querySelector('button[data-idx="25"]'); // #26
        if (lastBtn) {
          // ÊúÄÂàù„ÅÆ5„Å§ („Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ0„Äú4)
          const firstFiveLit = [0,1,2,3,4].every(i =>
            cellsEl.querySelector(`button[data-idx="${i}"]`)?.classList.contains('lit')
          );

          // 6„Äú25 Áï™ („Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ5„Äú24)
          let litCount = 0;
          for (let i = 5; i <= 24; i++) {
            if (cellsEl.querySelector(`button[data-idx="${i}"]`)?.classList.contains('lit')) {
              litCount++;
            }
          }

          if (firstFiveLit && litCount >= 15) {
            lastBtn.classList.add('lit');
            lastBtn.setAttribute('aria-pressed','true');
          } else {
            lastBtn.classList.remove('lit');
            lastBtn.setAttribute('aria-pressed','false');
          }
        }
      }

      // ‚úÖ day1 (Êóßtenkenmin) „ÅÆÁâπÊÆäÂá¶ÁêÜ (ÊúÄÂæå„ÅåËá™ÂãïËß£Èô§„Åï„Çå„Çã„Éó„É™„Çª„ÉÉ„Éà)
      const specialPresetsForLastBtn = ["day1"]; // day2„ÅØ‰∏äË®ò„ÅÆÂ∞ÇÁî®Âá¶ÁêÜ„ÅßË≥Ñ„Çè„Çå„Çã„Åü„ÇÅday1„ÅÆ„Åø
      if (specialPresetsForLastBtn.includes(presetEl.value)) {
          const allButtons = cellsEl.querySelectorAll('button[data-idx]');
          const lastBtnCandidate = Array.from(cellsEl.querySelectorAll('button'))
                            .filter(b => labels[b.dataset.idx] !== null)
                            .pop();

          let lastIdx = -1;
          if (lastBtnCandidate) {
              lastIdx = +lastBtnCandidate.dataset.idx;
          }

          if (lastIdx !== -1) { // lastBtnCandidate „ÅåÂ≠òÂú®„Åô„ÇãÂ†¥Âêà„ÅÆ„ÅøÂá¶ÁêÜ
              const otherBtns = Array.from(allButtons).filter(b => +b.dataset.idx !== lastIdx);
              const allLit = otherBtns.every(b => b.classList.contains('lit'));

              if (allLit) {
                  lastBtnCandidate.classList.add('lit');
                  lastBtnCandidate.setAttribute('aria-pressed', 'true');
              } else {
                  lastBtnCandidate.classList.remove('lit');
                  lastBtnCandidate.setAttribute('aria-pressed', 'false');
              }
          }
      }

      // ‚úÖ litCount „ÇíÊ≠£„Åó„ÅèË®àÁÆóÔºàlegendary „ÇÇÂê´„ÇÄÔºâ
      const litButtons = Array.from(cellsEl.querySelectorAll('button.lit'))
        .filter(b => labels[b.dataset.idx] !== null); // ÁÑ°Âäπ„Çª„É´(null)„ÅØÈô§Â§ñ

      litCountEl.textContent = litButtons.length;
      totalCountEl.textContent = labels.filter(l => l !== null).length; // totalCountEl „ÇÇ„Åì„Åì„ÅßÊõ¥Êñ∞

      // updateGlobalProgress(); // ÂÖ®‰ΩìÈÄ≤Êçó„Éú„Çø„É≥ÂâäÈô§„ÅÆ„Åü„ÇÅ„Ç≥„É°„É≥„Éà„Ç¢„Ç¶„Éà„Åæ„Åü„ÅØÂâäÈô§
      // checkProgressButtons(); // ÈÄ≤Êçó„Ç§„É≥„Ç∏„Ç±„Éº„Çø„ÉºÂâäÈô§„ÅÆ„Åü„ÇÅ„Ç≥„É°„É≥„Éà„Ç¢„Ç¶„Éà„Åæ„Åü„ÅØÂâäÈô§
    }

    // ÈÄ≤Êçó„Ç§„É≥„Ç∏„Ç±„Éº„Çø„ÉºÊõ¥Êñ∞ÔºàÂâäÈô§Ôºâ
    function checkProgressButtons() {
      // „Åì„ÅÆÈñ¢Êï∞„ÅØÈÄ≤Êçó„Éú„Çø„É≥„ÅÆÂâäÈô§„Å´‰º¥„ÅÑ„ÄÅÂëº„Å≥Âá∫„Åï„Çå„Å™„ÅÑ„Åü„ÇÅÂá¶ÁêÜ„ÇíÁ©∫„Å´„Åô„Çã„ÅãÂâäÈô§„Åó„Åæ„Åô„ÄÇ
      // ‰ªäÂõû„ÅØÂÆåÂÖ®„Å´ÂâäÈô§„Åó„Åæ„Åô„ÄÇ
    }

    function getStorageKey(presetName) {
      return `achievements-${presetName}`;
    }

    function save(presetName = presetEl.value) {
      const lit = Array.from(cellsEl.querySelectorAll('button.lit'))
        .map(b => +b.dataset.idx);

      const data = { lit };
      localStorage.setItem(getStorageKey(presetName), JSON.stringify(data));
    }

    // ‚úÖ Áä∂ÊÖãË™≠„ÅøËæº„Åø
    function load(presetName = presetEl.value) {
      const raw = localStorage.getItem(getStorageKey(presetName));
      // ‰∏ÄÂ∫¶„Åô„Åπ„Å¶Ê∂àÁÅØ
      cellsEl.querySelectorAll('button').forEach(b=>{
        b.classList.remove('lit');
        b.setAttribute('aria-pressed','false');
      });

      if (!raw) {
        updateCounts(); // ‰øùÂ≠ò„Éá„Éº„Çø„Åå„Å™„ÅÑÂ†¥Âêà„ÇÇ„Ç´„Ç¶„É≥„Éà„ÇíÊõ¥Êñ∞„Åó„ÄÅÁâπÊÆäËß£Èô§„ÇíÂÜçË©ï‰æ°
        return;
      }
      try {
        const data = JSON.parse(raw);
        if (!data || !Array.isArray(data.lit)) {
          updateCounts(); // „Éá„Éº„Çø„Åå‰∏çÊ≠£„Å™Â†¥Âêà„ÇÇ„Ç´„Ç¶„É≥„Éà„ÇíÊõ¥Êñ∞
          return;
        }

        // ‰øùÂ≠ò„Åï„Çå„Å¶„ÅÑ„Åü„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ„ÇíÂÜçÁÇπÁÅØ
        data.lit.forEach(idx=>{
          const btn = cellsEl.querySelector(`button[data-idx="${idx}"]`);
          if (btn) {
            btn.classList.add('lit');
            btn.setAttribute('aria-pressed','true');
          }
        });

        updateCounts();
      } catch(e) {
        console.error("load failed", e);
        updateCounts(); // „Ç®„É©„ÉºÊôÇ„ÇÇ„Ç´„Ç¶„É≥„Éà„ÇíÊõ¥Êñ∞
      }
    }

    function usePreset(name){
      const p = PRESETS[name];
      if (!p) return;
      legendary = new Set(p.legendary || []);
      buildGrid(p.size[0], p.size[1], p.labels);
    }
    
    presetEl.addEventListener('change', (e)=>{
      const newPreset = e.target.value;
      if (!newPreset) return;

      save(currentPreset);     // Êóß„Éó„É™„Çª„ÉÉ„Éà„Çí‰øùÂ≠ò
      usePreset(newPreset);     // Êñ∞„Éó„É™„Çª„ÉÉ„Éà„Å´ÂàáÊõø (DOMÂÜçÊßãÁØâ)
      load(newPreset);          // Êñ∞„Éó„É™„Çª„ÉÉ„Éà„ÅÆ‰øùÂ≠òÊ∏à„ÅøÁä∂ÊÖã„ÇíË™≠„ÅøËæº„Åø
      currentPreset = newPreset; // Êõ¥Êñ∞

      // ÊúÄÂæå„Å´ÈÅ∏Êäû„Åó„Åü„Éó„É™„Çª„ÉÉ„Éà„Çí‰øùÂ≠ò
      localStorage.setItem('lastPreset', newPreset);
    });

    resetBtn.addEventListener('click', resetAll);

    // ‚úÖ ÂÖ®‰ΩìÈÄ≤ÊçóÊõ¥Êñ∞Èñ¢Êï∞ÔºàÂâäÈô§Ôºâ
    function updateGlobalProgress() {
      // „Åì„ÅÆÈñ¢Êï∞„ÅØÂÖ®‰ΩìÈÄ≤Êçó„Éú„Çø„É≥„ÅÆÂâäÈô§„Å´‰º¥„ÅÑ„ÄÅÂëº„Å≥Âá∫„Åï„Çå„Å™„ÅÑ„Åü„ÇÅÂá¶ÁêÜ„ÇíÁ©∫„Å´„Åô„Çã„ÅãÂâäÈô§„Åó„Åæ„Åô„ÄÇ
      // ‰ªäÂõû„ÅØÂÆåÂÖ®„Å´ÂâäÈô§„Åó„Åæ„Åô„ÄÇ
    }

    // ‚úÖ „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ
    window.addEventListener('DOMContentLoaded', () => {
      const last = localStorage.getItem("lastPreset");
      let initialPreset = "day1"; // „Éá„Éï„Ç©„É´„Éà„Éó„É™„Çª„ÉÉ„Éà„Çíday1„Å´
      if (last && PRESETS[last]) {
        initialPreset = last;
      }
      
      presetEl.value = initialPreset;
      currentPreset = initialPreset; // currentPreset„ÇÇ„Åì„Åì„ÅßÂàùÊúüÂåñ
      
      usePreset(initialPreset); // ÂàùÂõûË°®Á§∫
      load(initialPreset);      // ‰øùÂ≠ò„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø
    });

  </script>
</body>
</html>
